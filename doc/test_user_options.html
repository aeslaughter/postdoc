<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>NSF Postdoctoral Research: Using the UserOptions Class</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script><script src="http://cdn.mathjax.org/MathJax.js"></script>

</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">NSF Postdoctoral Research
   
   </div>
   <div id="projectbrief">A set of C++ code developed by Andrew E. Slaughter</div>
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.7.6.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="dirs.html"><span>Directories</span></a></li>
      <li><a href="examples.html"><span>Examples</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div>
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
  initNavTree('test_user_options.html','');
</script>
<div id="doc-content">
<div class="header">
  <div class="headertitle">
<div class="title">Using the UserOptions Class </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h2><a class="anchor" id="test_user_options_contents"></a>
Contents</h2>
<ul>
<li><a class="el" href="test_user_options.html#test_user_options_intro">Introduction</a></li>
<li><a class="el" href="test_user_options.html#test_user_options_source">Program Explained</a></li>
<li><a class="el" href="test_user_options.html#test_user_options_use">Using the Test Program</a><ul>
<li><a class="el" href="test_user_options.html#test_user_options_config">Configuration Files</a></li>
<li><a class="el" href="test_user_options.html#test_user_options_pos">Positional Options</a></li>
<li><a class="el" href="test_user_options.html#test_user_options_exist">Option Existance</a></li>
<li><a class="el" href="test_user_options.html#test_user_options_multi">Multiple Values</a></li>
</ul>
</li>
<li><a class="el" href="test_user_options.html#test_user_options_code">Complete Program</a></li>
</ul>
<h2><a class="anchor" id="test_user_options_intro"></a>
Introduction</h2>
<p>The UserOptions class is a wrapper of the Boost.Program_options library, a link to the documetation is included below. The code in this example explores all of the functionality that was built into this wrapper class to make using the Boost class a bit easier. The UserOptions only implements a portion of what is possible with the Boost code, but it was designed in such a fashion that the program options may be manipulated with the Boost libraries to achieve custom option handling without changing the source code of the class, just the program using it.</p>
<p>Boost.Program_options:<br/>
 <a href="http://www.boost.org/doc/libs/1_49_0/doc/html/program_options.html">http://www.boost.org/doc/libs/1_49_0/doc/html/program_options.html</a></p>
<h2><a class="anchor" id="test_user_options_source"></a>
Program Explained</h2>
<p>The test program begins by including the necessary file and using the related namespace for the common library. The main program then begins, the main program requires the <code>argc</code> and <code>argv</code> inputs to which the command line inputs are captured. </p>
<div class="fragment"><pre class="fragment">
<span class="comment">// Standard include</span>
<span class="preprocessor">#include &lt;vector&gt;</span>

<span class="comment">// Include my common library, which contains the UserOptions class</span>
<span class="preprocessor">#include &quot;<a class="code" href="common_2include_8h.html" title="General include file for the common library.">common/include.h</a>&quot;</span>
<span class="keyword">using namespace </span>SlaughterCommon;

<span class="comment">// The main function for test_user_options.cpp</span>
<span class="keywordtype">int</span> <a class="code" href="v2m_8cpp.html#a0ddf1224851353fc92bfbff6f499fa97" title="Main program for generating meshes from 3D image data.">main</a>(<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span>* argv[]){
</pre></div><p> The first instance of the UserOptions class for this example is referred to as the "master" class, since all functionality will stem from this class. First, the <code>main</code> instance is created which will include some general options as evidenced by the header.</p>
<p>Then a title is added, this title will be printed prior to the list of variables when the <code>--help</code> is used. Thus, the help flag must be added. The <code>add_flag</code> is used for the help because it doesn't require an associated value, simply the presence of <code>--help</code> on the command line triggers the behavior. The <code>--help</code> flag is automatically handled by the UserOptions class to display the options list when this flag is added.</p>
<p>Next, another trigger is added (<code>--verbose</code>) which is used by the test program to toggle the display of the variables when the program is executed.</p>
<p>Finally, an option is specified that defines a default coinfiguration file, this options is automatically handled by the UserOptions class. More details of the configuration file is given here: <a class="el" href="test_user_options.html#test_user_options_config">Configuration Files</a> . </p>
<div class="fragment"><pre class="fragment"><span class="comment">// Define the master class for storing and accessing options</span>
UserOptions <a class="code" href="v2m_8cpp.html#a0ddf1224851353fc92bfbff6f499fa97" title="Main program for generating meshes from 3D image data.">main</a>(<span class="stringliteral">&quot;General Options&quot;</span>);

<span class="comment">// Add an extra title to the help output</span>
<a class="code" href="v2m_8cpp.html#a0ddf1224851353fc92bfbff6f499fa97" title="Main program for generating meshes from 3D image data.">main</a>.add_title(<span class="stringliteral">&quot;\nThis is a test program, the options that are accessible\nfrom the command line are listed below.\n\nFor example:\n./test_user_options --value=5\n\n&quot;</span>);

<span class="comment">// Add a help option</span>
<a class="code" href="v2m_8cpp.html#a0ddf1224851353fc92bfbff6f499fa97" title="Main program for generating meshes from 3D image data.">main</a>.add_flag(<span class="stringliteral">&quot;help,h&quot;</span>, <span class="stringliteral">&quot;If you need help&quot;</span>);

<span class="comment">// Add a verbose options that will all the results when used</span>
<a class="code" href="v2m_8cpp.html#a0ddf1224851353fc92bfbff6f499fa97" title="Main program for generating meshes from 3D image data.">main</a>.add_flag(<span class="stringliteral">&quot;verbose&quot;</span>, <span class="stringliteral">&quot;Display&#39;s the values of all the variables&quot;</span>);

<span class="comment">// Assign a configuration file, including a default file</span>
<a class="code" href="v2m_8cpp.html#a0ddf1224851353fc92bfbff6f499fa97" title="Main program for generating meshes from 3D image data.">main</a>.add_option&lt;<span class="keywordtype">string</span>&gt;(<span class="stringliteral">&quot;config&quot;</span>, <span class="stringliteral">&quot;../data/test_user_options/test_user_options.cfg&quot;</span>, <span class="stringliteral">&quot;Specify a configuration file&quot;</span>);

<span class="comment">// Some value that you may want to used</span>
<a class="code" href="v2m_8cpp.html#a0ddf1224851353fc92bfbff6f499fa97" title="Main program for generating meshes from 3D image data.">main</a>.add_option&lt;<span class="keywordtype">double</span>&gt;(<span class="stringliteral">&quot;value,v&quot;</span>, 0, <span class="stringliteral">&quot;The value of some importart variable&quot;</span>);
</pre></div><p> After the <code>main</code> instance, two more instances of the UserOptions are created that contain a number of options. The "Advanced" options include notation that is used by the configuration file (<a class="el" href="test_user_options.html#test_user_options_config">Configuration Files</a>). Additionally, the <code>input</code> and <code>output</code> options utilize positional arguments, these function exactly as described in the Boost documentation. </p>
<div class="fragment"><pre class="fragment"><span class="comment">// Define another instance of UserOptions that includes io info</span>
UserOptions io(<span class="stringliteral">&quot;Input/Ouput Options&quot;</span>);
io.add_option&lt;<span class="keywordtype">string</span>&gt;(<span class="stringliteral">&quot;input,i&quot;</span>, <span class="stringliteral">&quot;input.txt&quot;</span>, <span class="stringliteral">&quot;The input filename&quot;</span>, 1);
io.add_option&lt;<span class="keywordtype">string</span>&gt;(<span class="stringliteral">&quot;output,o&quot;</span>, <span class="stringliteral">&quot;default.txt&quot;</span>, <span class="stringliteral">&quot;The output file for widget document&quot;</span>, 1);
io.add_option&lt;std::vector&lt;string&gt; &gt;(<span class="stringliteral">&quot;file-list&quot;</span>,<span class="stringliteral">&quot;A list of files&quot;</span>, 3);

<span class="comment">// Define some advanced options (the configuration file sets some of these)</span>
UserOptions adv(<span class="stringliteral">&quot;Advanced Options&quot;</span>);
<a class="code" href="v2m_8cpp.html#a0ddf1224851353fc92bfbff6f499fa97" title="Main program for generating meshes from 3D image data.">main</a>.add_option&lt;<span class="keywordtype">double</span>&gt;(<span class="stringliteral">&quot;advanced-value&quot;</span>, 0, <span class="stringliteral">&quot;The value of some really importart variable&quot;</span>);
adv.add_option&lt;<span class="keywordtype">string</span>&gt;(<span class="stringliteral">&quot;input.path&quot;</span>,<span class="stringliteral">&quot;The path to the input file&quot;</span>);
adv.add_option&lt;<span class="keywordtype">string</span>&gt;(<span class="stringliteral">&quot;input.name&quot;</span>,<span class="stringliteral">&quot;The name of the input file, w/o the extension&quot;</span>);
adv.add_option&lt;<span class="keywordtype">string</span>&gt;(<span class="stringliteral">&quot;input.ext&quot;</span>,<span class="stringliteral">&quot;The extension to the input file&quot;</span>);
adv.add_option&lt;std::vector&lt;int&gt; &gt;(<span class="stringliteral">&quot;many,m&quot;</span>, <span class="stringliteral">&quot;Many of these are allowed&quot;</span>);
adv.add_option&lt;std::vector&lt;double&gt; &gt;(<span class="stringliteral">&quot;multi&quot;</span>,<span class="stringliteral">&quot;This input can contain multiple values&quot;</span>);

std::vector&lt;int&gt; def;
def.push_back(5);
def.push_back(6);
adv.add_option&lt;std::vector&lt;int&gt; &gt;(<span class="stringliteral">&quot;many-multi&quot;</span>, def, <span class="stringliteral">&quot;You can combine behavior and list default(s)&quot;</span>, <span class="stringliteral">&quot;[5,6]&quot;</span>);
</pre></div><p> The next instance of the class will be used to add a few hidden options that will not be visible with the general <code>--help</code>, but a flag is added <code>--show-hidden</code> that causes the hidden options to display. The code for displaying is included in the program itself. </p>
<div class="fragment"><pre class="fragment"><span class="comment">// Add some hidden options</span>
UserOptions hide(<span class="stringliteral">&quot;Hidden Options&quot;</span>);
hide.add_option&lt;<span class="keywordtype">int</span>&gt;(<span class="stringliteral">&quot;big-red-button&quot;</span>, 0, <span class="stringliteral">&quot;Don&#39;t change this this value!&quot;</span>);
hide.add_flag(<span class="stringliteral">&quot;show-hidden&quot;</span>,<span class="stringliteral">&quot;If you know about it then you know what it does&quot;</span>);
hide.hidden = <span class="keyword">true</span>; <span class="comment">// this hides the hide instance</span>
</pre></div><p> At this point all of the desired options are defined, but they are not ready for use. To make them available and functional, first the additional instances are grouped to the "master" instance with the <code>add</code> function. Then the options are made ready by apply the command line arguments with the <code>apply_options</code> function. </p>
<div class="fragment"><pre class="fragment"><span class="comment">// Group the various classes and apply the command line inputs</span>
<a class="code" href="v2m_8cpp.html#a0ddf1224851353fc92bfbff6f499fa97" title="Main program for generating meshes from 3D image data.">main</a>.add(io).add(adv).add(hide);
<a class="code" href="v2m_8cpp.html#a0ddf1224851353fc92bfbff6f499fa97" title="Main program for generating meshes from 3D image data.">main</a>.apply_options(argc, argv);
</pre></div><p> The remainder of the program simply implements a few types of display to demonstrate how the options are used, see <a class="el" href="test_user_options.html#test_user_options_use">Using the Test Program</a> . </p>
<div class="fragment"><pre class="fragment"><span class="comment">// If --show-hidden is used display the available hidden options</span>
<span class="keywordflow">if</span> (<a class="code" href="v2m_8cpp.html#a0ddf1224851353fc92bfbff6f499fa97" title="Main program for generating meshes from 3D image data.">main</a>.get_flag(<span class="stringliteral">&quot;show-hidden&quot;</span>)){
   std::cout &lt;&lt; hide.opt_list &lt;&lt; std::endl;
   <span class="keywordflow">return</span> 0;
}
<span class="comment">// If --verbose is used, show all the values</span>
<span class="keywordtype">bool</span> display = <a class="code" href="v2m_8cpp.html#a0ddf1224851353fc92bfbff6f499fa97" title="Main program for generating meshes from 3D image data.">main</a>.get_flag(<span class="stringliteral">&quot;verbose&quot;</span>);
<span class="keywordflow">if</span> (display){
   <span class="comment">// Show the main options</span>
   printf(<span class="stringliteral">&quot;config: %s\n&quot;</span>, (<a class="code" href="v2m_8cpp.html#a0ddf1224851353fc92bfbff6f499fa97" title="Main program for generating meshes from 3D image data.">main</a>.get&lt;<span class="keywordtype">string</span>&gt;(<span class="stringliteral">&quot;config&quot;</span>)).c_str());
   printf(<span class="stringliteral">&quot;value: %f\n&quot;</span>, <a class="code" href="v2m_8cpp.html#a0ddf1224851353fc92bfbff6f499fa97" title="Main program for generating meshes from 3D image data.">main</a>.get&lt;<span class="keywordtype">double</span>&gt;(<span class="stringliteral">&quot;value&quot;</span>));
   
   <span class="comment">// Show the input/output options</span>
   printf(<span class="stringliteral">&quot;input: %s\n&quot;</span>, (<a class="code" href="v2m_8cpp.html#a0ddf1224851353fc92bfbff6f499fa97" title="Main program for generating meshes from 3D image data.">main</a>.get&lt;<span class="keywordtype">string</span>&gt;(<span class="stringliteral">&quot;input&quot;</span>)).c_str());
   printf(<span class="stringliteral">&quot;output: %s\n&quot;</span>, (<a class="code" href="v2m_8cpp.html#a0ddf1224851353fc92bfbff6f499fa97" title="Main program for generating meshes from 3D image data.">main</a>.get&lt;<span class="keywordtype">string</span>&gt;(<span class="stringliteral">&quot;output&quot;</span>)).c_str());
   
   <span class="keywordflow">if</span>(<a class="code" href="v2m_8cpp.html#a0ddf1224851353fc92bfbff6f499fa97" title="Main program for generating meshes from 3D image data.">main</a>.exist(<span class="stringliteral">&quot;file-list&quot;</span>)){
      std::vector&lt;string&gt; vec0 = <a class="code" href="v2m_8cpp.html#a0ddf1224851353fc92bfbff6f499fa97" title="Main program for generating meshes from 3D image data.">main</a>.get&lt;std::vector&lt;string&gt; &gt;(<span class="stringliteral">&quot;file-list&quot;</span>);
      <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i = 0; i &lt; vec0.size(); i++){
         printf(<span class="stringliteral">&quot;file-list[%d] = %s\n&quot;</span>, i, vec0[i].c_str());
      }  
   }
   
   <span class="comment">// Show the advanced options</span>
   printf(<span class="stringliteral">&quot;advanced-value: %f\n&quot;</span>, <a class="code" href="v2m_8cpp.html#a0ddf1224851353fc92bfbff6f499fa97" title="Main program for generating meshes from 3D image data.">main</a>.get&lt;<span class="keywordtype">double</span>&gt;(<span class="stringliteral">&quot;advanced-value&quot;</span>));
   printf(<span class="stringliteral">&quot;input.path: %s\n&quot;</span>, (<a class="code" href="v2m_8cpp.html#a0ddf1224851353fc92bfbff6f499fa97" title="Main program for generating meshes from 3D image data.">main</a>.get&lt;<span class="keywordtype">string</span>&gt;(<span class="stringliteral">&quot;input.path&quot;</span>)).c_str());
   printf(<span class="stringliteral">&quot;input.name: %s\n&quot;</span>, (<a class="code" href="v2m_8cpp.html#a0ddf1224851353fc92bfbff6f499fa97" title="Main program for generating meshes from 3D image data.">main</a>.get&lt;<span class="keywordtype">string</span>&gt;(<span class="stringliteral">&quot;input.name&quot;</span>)).c_str());
   printf(<span class="stringliteral">&quot;input.ext: %s\n&quot;</span>, (<a class="code" href="v2m_8cpp.html#a0ddf1224851353fc92bfbff6f499fa97" title="Main program for generating meshes from 3D image data.">main</a>.get&lt;<span class="keywordtype">string</span>&gt;(<span class="stringliteral">&quot;input.ext&quot;</span>)).c_str());
   printf(<span class="stringliteral">&quot;bit-red-button: %d\n&quot;</span>, <a class="code" href="v2m_8cpp.html#a0ddf1224851353fc92bfbff6f499fa97" title="Main program for generating meshes from 3D image data.">main</a>.get&lt;<span class="keywordtype">int</span>&gt;(<span class="stringliteral">&quot;big-red-button&quot;</span>));
   
   <span class="keywordflow">if</span> (<a class="code" href="v2m_8cpp.html#a0ddf1224851353fc92bfbff6f499fa97" title="Main program for generating meshes from 3D image data.">main</a>.exist(<span class="stringliteral">&quot;many&quot;</span>)){
      std::vector&lt;int&gt; vec1 = <a class="code" href="v2m_8cpp.html#a0ddf1224851353fc92bfbff6f499fa97" title="Main program for generating meshes from 3D image data.">main</a>.get&lt;std::vector&lt;int&gt; &gt;(<span class="stringliteral">&quot;many&quot;</span>);
      <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i = 0; i &lt; vec1.size(); i++){
         printf(<span class="stringliteral">&quot;many[%d] = %d\n&quot;</span>, i, vec1[i]);
      }
   }
   
   <span class="keywordflow">if</span> (<a class="code" href="v2m_8cpp.html#a0ddf1224851353fc92bfbff6f499fa97" title="Main program for generating meshes from 3D image data.">main</a>.exist(<span class="stringliteral">&quot;multi&quot;</span>)){
      std::vector&lt;double&gt; vec2 = <a class="code" href="v2m_8cpp.html#a0ddf1224851353fc92bfbff6f499fa97" title="Main program for generating meshes from 3D image data.">main</a>.get&lt;std::vector&lt;double&gt; &gt;(<span class="stringliteral">&quot;multi&quot;</span>);
      <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i = 0; i &lt; vec2.size(); i++){
         printf(<span class="stringliteral">&quot;multi[%d] = %f\n&quot;</span>, i, vec2[i]);
      }
   }
   
   <span class="keywordflow">if</span> (<a class="code" href="v2m_8cpp.html#a0ddf1224851353fc92bfbff6f499fa97" title="Main program for generating meshes from 3D image data.">main</a>.exist(<span class="stringliteral">&quot;many-multi&quot;</span>)){
      std::vector&lt;int&gt; vec3 = <a class="code" href="v2m_8cpp.html#a0ddf1224851353fc92bfbff6f499fa97" title="Main program for generating meshes from 3D image data.">main</a>.get&lt;std::vector&lt;int&gt; &gt;(<span class="stringliteral">&quot;many-multi&quot;</span>);
      <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i = 0; i &lt; vec3.size(); i++){
         printf(<span class="stringliteral">&quot;many-multi[%d] = %d\n&quot;</span>, i, vec3[i]);
      }  
   }
   
   
} <span class="keywordflow">else</span> {
   printf(<span class="stringliteral">&quot;The program worked great!\n&quot;</span>);
}

<span class="keywordflow">return</span> 0;
}
</pre></div> <h2><a class="anchor" id="test_user_options_use"></a>
Using the Test Program</h2>
<p>The command line syntax is as follows. For options defined with a short-hand flag, those with a "," followed by a single character (e.g., the <code>value</code> option in the example program) the following syntax is supported. If a short-hand is not given, only the <code>--</code> commands are valid. </p>
<div class="fragment"><pre class="fragment">
$ ./test_user_options --value=5
$ ./test_user_options --value 5
$ ./test_user_options -v 5
</pre></div><p>To display the list of available options simply use the <code>--help</code> option as follows. </p>
<div class="fragment"><pre class="fragment">
$ ./test_user_options --help
$ ./test_user_options -h
</pre></div><p>To display a list of all the values of all the options, use the <code>--verbose</code> flag. This flag can be anywhere if additional options are set. </p>
<div class="fragment"><pre class="fragment">
$ ./test_user_options --verbose
</pre></div><p>To display the hidden options use the <code>--show-hidden</code> flag, not that this behavior is not part of the class, just the example. </p>
<div class="fragment"><pre class="fragment">
$ ./test_user_options --show-hidden
</pre></div><h3><a class="anchor" id="test_user_options_config"></a>
Configuration Files</h3>
<p>An example configuration file is included in the <code>data/test_user_options</code> directory. This file is shown below. Notice the use of <code></code>[input] label. This causes all options below it to have the <code>input</code>. prefix. Thus, the options, when defined, must have this syntax as shown in the advanced options of the example program.</p>
<div class="fragment"><pre class="fragment">
advanced-value=360
[input]
path=/this/is/my/path/
name=myfile
ext=.txt
</pre></div><p>In all cases the values from the command-line overwrite values in the configuration file. For example the following changes the value for <code>--advanced-value</code> from the value of 360 defined in the file. </p>
<div class="fragment"><pre class="fragment">
$ ./test_user_options --advanced-value=180 --verbose
</pre></div><h3><a class="anchor" id="test_user_options_pos"></a>
Positional Options</h3>
<p>The use of positional options is used to make setting the input and output files easier, that is without the inclusion of the <code>--input</code> and <code>--output</code> flags or thier short-hands. The user should refer to the Boost documentation for more help with positional options. The following options demonstrate how they are used in this program.</p>
<p>The basic usage, more advanced usage exists, sets the first input that does not have a flag is set to the input and the second without a flag to the output.</p>
<div class="fragment"><pre class="fragment">
$ ./test_user_options in.dat --advanced-value=180 --verbose out.dat
$ ./test_user_options in.dat out.dat --advanced-value=180 --verbose 
$ ./test_user_options in.dat --advanced-value=180 out.dat --verbose 
</pre></div><h3><a class="anchor" id="test_user_options_exist"></a>
Option Existance</h3>
<p>The existance of an option may be tested using <code>exist</code> member function as follows. This allows the user to test if an option is specified This is useful if no default value is given, which causes an error when the <code>get</code> function is used.</p>
<div class="fragment"><pre class="fragment"><span class="keywordflow">if</span> (<a class="code" href="v2m_8cpp.html#a0ddf1224851353fc92bfbff6f499fa97" title="Main program for generating meshes from 3D image data.">main</a>.exist(<span class="stringliteral">&quot;many&quot;</span>)){
   std::vector&lt;int&gt; vec = <a class="code" href="v2m_8cpp.html#a0ddf1224851353fc92bfbff6f499fa97" title="Main program for generating meshes from 3D image data.">main</a>.get&lt;std::vector&lt;int&gt; &gt;(<span class="stringliteral">&quot;many&quot;</span>);
   <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i = 0; i &lt; vec.size(); i++){
      printf(<span class="stringliteral">&quot;many[%d] = %d\n&quot;</span>, i, vec[i]);
   }
}
</pre></div><h3><a class="anchor" id="test_user_options_multi"></a>
Multiple Values</h3>
<p>It is possible to store multiple instances of an option, this is accomplished by using a <code>std::vector</code> as the option type, as shown below and in the advanced options group in the example.</p>
<div class="fragment"><pre class="fragment">adv.add_option&lt;std::vector&lt;int&gt; &gt;(<span class="stringliteral">&quot;many,m&quot;</span>, <span class="stringliteral">&quot;Many of these are allowed&quot;</span>);
</pre></div><p>Run the following to store multiple integers in the "many" option.</p>
<div class="fragment"><pre class="fragment">
$ ./test_user_options --many 1 --many 2 --verbose
</pre></div><p>Multiple values for a single option may also be specified. This is accomplished with the same syntax as above.</p>
<div class="fragment"><pre class="fragment">adv.add_option&lt;std::vector&lt;double&gt; &gt;(<span class="stringliteral">&quot;multi&quot;</span>,<span class="stringliteral">&quot;This input can contain multiple values&quot;</span>);
</pre></div><p>This vector then stores the value(s) specified after the option flag, which is illustrated with the following command. </p>
<div class="fragment"><pre class="fragment">
$ ./test_user_options --multi 1 12 1.2 --verbose
</pre></div><p>It is possible to define default values, but an additional argument is required. This argument provides the text to display when the <code>--help</code> command is given. Failure to include this value will produce an error message from Boost. For example:</p>
<div class="fragment"><pre class="fragment">std::vector&lt;int&gt; def;
def.push_back(5);
def.push_back(6);
adv.add_option&lt;std::vector&lt;int&gt; &gt;(<span class="stringliteral">&quot;many-multi&quot;</span>, def, <span class="stringliteral">&quot;You can combine behavior and list default(s)&quot;</span>, <span class="stringliteral">&quot;[5,6]&quot;</span>);
</pre></div><p>The two methods methoded above for defining multipe values are interchangeable or may be used in combination, as illustred with the "many-multi" option in the test program.</p>
<div class="fragment"><pre class="fragment">
./test_user_options --verbose --many-multi 10 11 12 --many-multi 20 21 22 --value 1 --many 1 --many 2 --multi 1 1.1 1.2 --multi 2 2.1 2.2
</pre></div><p>The multitoken behavior is built-in to the positional arguments, however the user must specify how many values are expected, as shown in the following code and command-line execution. For this reason, the <code>apply_multitoken_option</code> does not allow positional agruments.</p>
<div class="fragment"><pre class="fragment">io.add_option&lt;std::vector&lt;string&gt; &gt;(<span class="stringliteral">&quot;file-list&quot;</span>,<span class="stringliteral">&quot;A list of files&quot;</span>, 3);
</pre></div><div class="fragment"><pre class="fragment">
$ ./test_user_options --verbose input.txt output.txt file1.txt file2.txt
</pre></div><h2><a class="anchor" id="test_user_options_code"></a>
Complete Program</h2>
<div class="fragment"><pre class="fragment">


<span class="comment">// Standard include</span>
<span class="preprocessor">#include &lt;vector&gt;</span>

<span class="comment">// Include my common library, which contains the UserOptions class</span>
<span class="preprocessor">#include &quot;<a class="code" href="common_2include_8h.html" title="General include file for the common library.">common/include.h</a>&quot;</span>
<span class="keyword">using namespace </span>SlaughterCommon;

<span class="comment">// The main function for test_user_options.cpp</span>
<span class="keywordtype">int</span> <a class="code" href="v2m_8cpp.html#a0ddf1224851353fc92bfbff6f499fa97" title="Main program for generating meshes from 3D image data.">main</a>(<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span>* argv[]){

<span class="comment">// Define the master class for storing and accessing options</span>
<a class="code" href="class_slaughter_common_1_1_user_options.html" title="A class for handling command line specified options.">UserOptions</a> <a class="code" href="v2m_8cpp.html#a0ddf1224851353fc92bfbff6f499fa97" title="Main program for generating meshes from 3D image data.">main</a>(<span class="stringliteral">&quot;General Options&quot;</span>);

<span class="comment">// Add an extra title to the help output</span>
<a class="code" href="v2m_8cpp.html#a0ddf1224851353fc92bfbff6f499fa97" title="Main program for generating meshes from 3D image data.">main</a>.add_title(<span class="stringliteral">&quot;\nThis is a test program, the options that are accessible\nfrom the command line are listed below.\n\nFor example:\n./test_user_options --value=5\n\n&quot;</span>);

<span class="comment">// Add a help option</span>
<a class="code" href="v2m_8cpp.html#a0ddf1224851353fc92bfbff6f499fa97" title="Main program for generating meshes from 3D image data.">main</a>.add_flag(<span class="stringliteral">&quot;help,h&quot;</span>, <span class="stringliteral">&quot;If you need help&quot;</span>);

<span class="comment">// Add a verbose options that will all the results when used</span>
<a class="code" href="v2m_8cpp.html#a0ddf1224851353fc92bfbff6f499fa97" title="Main program for generating meshes from 3D image data.">main</a>.add_flag(<span class="stringliteral">&quot;verbose&quot;</span>, <span class="stringliteral">&quot;Display&#39;s the values of all the variables&quot;</span>);

<span class="comment">// Assign a configuration file, including a default file</span>
<a class="code" href="v2m_8cpp.html#a0ddf1224851353fc92bfbff6f499fa97" title="Main program for generating meshes from 3D image data.">main</a>.add_option&lt;<span class="keywordtype">string</span>&gt;(<span class="stringliteral">&quot;config&quot;</span>, <span class="stringliteral">&quot;../data/test_user_options/test_user_options.cfg&quot;</span>, <span class="stringliteral">&quot;Specify a configuration file&quot;</span>);

<span class="comment">// Some value that you may want to used</span>
<a class="code" href="v2m_8cpp.html#a0ddf1224851353fc92bfbff6f499fa97" title="Main program for generating meshes from 3D image data.">main</a>.add_option&lt;<span class="keywordtype">double</span>&gt;(<span class="stringliteral">&quot;value,v&quot;</span>, 0, <span class="stringliteral">&quot;The value of some importart variable&quot;</span>);

<span class="comment">// Define another instance of UserOptions that includes io info</span>
<a class="code" href="class_slaughter_common_1_1_user_options.html" title="A class for handling command line specified options.">UserOptions</a> io(<span class="stringliteral">&quot;Input/Ouput Options&quot;</span>);
io.add_option&lt;<span class="keywordtype">string</span>&gt;(<span class="stringliteral">&quot;input,i&quot;</span>, <span class="stringliteral">&quot;input.txt&quot;</span>, <span class="stringliteral">&quot;The input filename&quot;</span>, 1);
io.add_option&lt;<span class="keywordtype">string</span>&gt;(<span class="stringliteral">&quot;output,o&quot;</span>, <span class="stringliteral">&quot;default.txt&quot;</span>, <span class="stringliteral">&quot;The output file for widget document&quot;</span>, 1);
io.add_option&lt;std::vector&lt;string&gt; &gt;(<span class="stringliteral">&quot;file-list&quot;</span>,<span class="stringliteral">&quot;A list of files&quot;</span>, 3);

<span class="comment">// Define some advanced options (the configuration file sets some of these)</span>
<a class="code" href="class_slaughter_common_1_1_user_options.html" title="A class for handling command line specified options.">UserOptions</a> adv(<span class="stringliteral">&quot;Advanced Options&quot;</span>);
<a class="code" href="v2m_8cpp.html#a0ddf1224851353fc92bfbff6f499fa97" title="Main program for generating meshes from 3D image data.">main</a>.add_option&lt;<span class="keywordtype">double</span>&gt;(<span class="stringliteral">&quot;advanced-value&quot;</span>, 0, <span class="stringliteral">&quot;The value of some really importart variable&quot;</span>);
adv.add_option&lt;<span class="keywordtype">string</span>&gt;(<span class="stringliteral">&quot;input.path&quot;</span>,<span class="stringliteral">&quot;The path to the input file&quot;</span>);
adv.add_option&lt;<span class="keywordtype">string</span>&gt;(<span class="stringliteral">&quot;input.name&quot;</span>,<span class="stringliteral">&quot;The name of the input file, w/o the extension&quot;</span>);
adv.add_option&lt;<span class="keywordtype">string</span>&gt;(<span class="stringliteral">&quot;input.ext&quot;</span>,<span class="stringliteral">&quot;The extension to the input file&quot;</span>);
adv.add_option&lt;std::vector&lt;int&gt; &gt;(<span class="stringliteral">&quot;many,m&quot;</span>, <span class="stringliteral">&quot;Many of these are allowed&quot;</span>);
adv.add_option&lt;std::vector&lt;double&gt; &gt;(<span class="stringliteral">&quot;multi&quot;</span>,<span class="stringliteral">&quot;This input can contain multiple values&quot;</span>);

std::vector&lt;int&gt; def;
def.push_back(5);
def.push_back(6);
adv.add_option&lt;std::vector&lt;int&gt; &gt;(<span class="stringliteral">&quot;many-multi&quot;</span>, def, <span class="stringliteral">&quot;You can combine behavior and list default(s)&quot;</span>, <span class="stringliteral">&quot;[5,6]&quot;</span>);

<span class="comment">// Add some hidden options</span>
<a class="code" href="class_slaughter_common_1_1_user_options.html" title="A class for handling command line specified options.">UserOptions</a> hide(<span class="stringliteral">&quot;Hidden Options&quot;</span>);
hide.add_option&lt;<span class="keywordtype">int</span>&gt;(<span class="stringliteral">&quot;big-red-button&quot;</span>, 0, <span class="stringliteral">&quot;Don&#39;t change this this value!&quot;</span>);
hide.add_flag(<span class="stringliteral">&quot;show-hidden&quot;</span>,<span class="stringliteral">&quot;If you know about it then you know what it does&quot;</span>);
hide.hidden = <span class="keyword">true</span>; <span class="comment">// this hides the hide instance</span>
<span class="comment"></span>
<span class="comment">// Group the various classes and apply the command line inputs</span>
<a class="code" href="v2m_8cpp.html#a0ddf1224851353fc92bfbff6f499fa97" title="Main program for generating meshes from 3D image data.">main</a>.add(io).add(adv).add(hide);
<a class="code" href="v2m_8cpp.html#a0ddf1224851353fc92bfbff6f499fa97" title="Main program for generating meshes from 3D image data.">main</a>.apply_options(argc, argv);

<span class="comment">// If --show-hidden is used display the available hidden options</span>
<span class="keywordflow">if</span> (<a class="code" href="v2m_8cpp.html#a0ddf1224851353fc92bfbff6f499fa97" title="Main program for generating meshes from 3D image data.">main</a>.get_flag(<span class="stringliteral">&quot;show-hidden&quot;</span>)){
   std::cout &lt;&lt; hide.opt_list &lt;&lt; std::endl;
   <span class="keywordflow">return</span> 0;
}
<span class="comment">// If --verbose is used, show all the values</span>
<span class="keywordtype">bool</span> display = <a class="code" href="v2m_8cpp.html#a0ddf1224851353fc92bfbff6f499fa97" title="Main program for generating meshes from 3D image data.">main</a>.get_flag(<span class="stringliteral">&quot;verbose&quot;</span>);
<span class="keywordflow">if</span> (display){
   <span class="comment">// Show the main options</span>
   printf(<span class="stringliteral">&quot;config: %s\n&quot;</span>, (<a class="code" href="v2m_8cpp.html#a0ddf1224851353fc92bfbff6f499fa97" title="Main program for generating meshes from 3D image data.">main</a>.get&lt;<span class="keywordtype">string</span>&gt;(<span class="stringliteral">&quot;config&quot;</span>)).c_str());
   printf(<span class="stringliteral">&quot;value: %f\n&quot;</span>, <a class="code" href="v2m_8cpp.html#a0ddf1224851353fc92bfbff6f499fa97" title="Main program for generating meshes from 3D image data.">main</a>.get&lt;<span class="keywordtype">double</span>&gt;(<span class="stringliteral">&quot;value&quot;</span>));
   
   <span class="comment">// Show the input/output options</span>
   printf(<span class="stringliteral">&quot;input: %s\n&quot;</span>, (<a class="code" href="v2m_8cpp.html#a0ddf1224851353fc92bfbff6f499fa97" title="Main program for generating meshes from 3D image data.">main</a>.get&lt;<span class="keywordtype">string</span>&gt;(<span class="stringliteral">&quot;input&quot;</span>)).c_str());
   printf(<span class="stringliteral">&quot;output: %s\n&quot;</span>, (<a class="code" href="v2m_8cpp.html#a0ddf1224851353fc92bfbff6f499fa97" title="Main program for generating meshes from 3D image data.">main</a>.get&lt;<span class="keywordtype">string</span>&gt;(<span class="stringliteral">&quot;output&quot;</span>)).c_str());
   
   <span class="keywordflow">if</span>(<a class="code" href="v2m_8cpp.html#a0ddf1224851353fc92bfbff6f499fa97" title="Main program for generating meshes from 3D image data.">main</a>.exist(<span class="stringliteral">&quot;file-list&quot;</span>)){
      std::vector&lt;string&gt; vec0 = <a class="code" href="v2m_8cpp.html#a0ddf1224851353fc92bfbff6f499fa97" title="Main program for generating meshes from 3D image data.">main</a>.get&lt;std::vector&lt;string&gt; &gt;(<span class="stringliteral">&quot;file-list&quot;</span>);
      <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i = 0; i &lt; vec0.size(); i++){
         printf(<span class="stringliteral">&quot;file-list[%d] = %s\n&quot;</span>, i, vec0[i].c_str());
      }  
   }
   
   <span class="comment">// Show the advanced options</span>
   printf(<span class="stringliteral">&quot;advanced-value: %f\n&quot;</span>, <a class="code" href="v2m_8cpp.html#a0ddf1224851353fc92bfbff6f499fa97" title="Main program for generating meshes from 3D image data.">main</a>.get&lt;<span class="keywordtype">double</span>&gt;(<span class="stringliteral">&quot;advanced-value&quot;</span>));
   printf(<span class="stringliteral">&quot;input.path: %s\n&quot;</span>, (<a class="code" href="v2m_8cpp.html#a0ddf1224851353fc92bfbff6f499fa97" title="Main program for generating meshes from 3D image data.">main</a>.get&lt;<span class="keywordtype">string</span>&gt;(<span class="stringliteral">&quot;input.path&quot;</span>)).c_str());
   printf(<span class="stringliteral">&quot;input.name: %s\n&quot;</span>, (<a class="code" href="v2m_8cpp.html#a0ddf1224851353fc92bfbff6f499fa97" title="Main program for generating meshes from 3D image data.">main</a>.get&lt;<span class="keywordtype">string</span>&gt;(<span class="stringliteral">&quot;input.name&quot;</span>)).c_str());
   printf(<span class="stringliteral">&quot;input.ext: %s\n&quot;</span>, (<a class="code" href="v2m_8cpp.html#a0ddf1224851353fc92bfbff6f499fa97" title="Main program for generating meshes from 3D image data.">main</a>.get&lt;<span class="keywordtype">string</span>&gt;(<span class="stringliteral">&quot;input.ext&quot;</span>)).c_str());
   printf(<span class="stringliteral">&quot;bit-red-button: %d\n&quot;</span>, <a class="code" href="v2m_8cpp.html#a0ddf1224851353fc92bfbff6f499fa97" title="Main program for generating meshes from 3D image data.">main</a>.get&lt;<span class="keywordtype">int</span>&gt;(<span class="stringliteral">&quot;big-red-button&quot;</span>));
   
   <span class="keywordflow">if</span> (<a class="code" href="v2m_8cpp.html#a0ddf1224851353fc92bfbff6f499fa97" title="Main program for generating meshes from 3D image data.">main</a>.exist(<span class="stringliteral">&quot;many&quot;</span>)){
      std::vector&lt;int&gt; vec1 = <a class="code" href="v2m_8cpp.html#a0ddf1224851353fc92bfbff6f499fa97" title="Main program for generating meshes from 3D image data.">main</a>.get&lt;std::vector&lt;int&gt; &gt;(<span class="stringliteral">&quot;many&quot;</span>);
      <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i = 0; i &lt; vec1.size(); i++){
         printf(<span class="stringliteral">&quot;many[%d] = %d\n&quot;</span>, i, vec1[i]);
      }
   }
   
   <span class="keywordflow">if</span> (<a class="code" href="v2m_8cpp.html#a0ddf1224851353fc92bfbff6f499fa97" title="Main program for generating meshes from 3D image data.">main</a>.exist(<span class="stringliteral">&quot;multi&quot;</span>)){
      std::vector&lt;double&gt; vec2 = <a class="code" href="v2m_8cpp.html#a0ddf1224851353fc92bfbff6f499fa97" title="Main program for generating meshes from 3D image data.">main</a>.get&lt;std::vector&lt;double&gt; &gt;(<span class="stringliteral">&quot;multi&quot;</span>);
      <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i = 0; i &lt; vec2.size(); i++){
         printf(<span class="stringliteral">&quot;multi[%d] = %f\n&quot;</span>, i, vec2[i]);
      }
   }
   
   <span class="keywordflow">if</span> (<a class="code" href="v2m_8cpp.html#a0ddf1224851353fc92bfbff6f499fa97" title="Main program for generating meshes from 3D image data.">main</a>.exist(<span class="stringliteral">&quot;many-multi&quot;</span>)){
      std::vector&lt;int&gt; vec3 = <a class="code" href="v2m_8cpp.html#a0ddf1224851353fc92bfbff6f499fa97" title="Main program for generating meshes from 3D image data.">main</a>.get&lt;std::vector&lt;int&gt; &gt;(<span class="stringliteral">&quot;many-multi&quot;</span>);
      <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i = 0; i &lt; vec3.size(); i++){
         printf(<span class="stringliteral">&quot;many-multi[%d] = %d\n&quot;</span>, i, vec3[i]);
      }  
   }
   
   
} <span class="keywordflow">else</span> {
   printf(<span class="stringliteral">&quot;The program worked great!\n&quot;</span>);
}

<span class="keywordflow">return</span> 0;
}
</pre></div> </div></div><!-- contents -->
</div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

  <div id="nav-path" class="navpath">
    <ul>
      <li class="navelem"><a class="el" href="index.html">C++ Programs of Andrew Slaughter's Postdoctoral Research Projects</a>      </li>

    <li class="footer">Generated on Tue Jun 26 2012 17:04:48 for NSF Postdoctoral Research by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.6.1 </li>
   </ul>
 </div>


</body>
</html>
